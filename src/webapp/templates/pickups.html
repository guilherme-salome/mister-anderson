{% extends "base.html" %}

{% block title %}Pickups{% endblock %}

{% block page_heading %}
  <div class="top-bar__content">
    <h1 class="top-bar__title">Pickups</h1>
    <p class="top-bar__subtitle"></p>
  </div>
{% endblock %}

{% block content %}
  <section class="card card--inset">
    <p class="section-lede">Search for a pickup number to jump straight into its pallets.</p>
    <form method="get" action="/pickups" class="form form--stacked">
      <div class="form-field">
        <label for="pickup_query">Pickup number</label>
        <input type="number"
               id="pickup_query"
               name="q"
               value="{{ query or '' }}"
               placeholder="Enter pickup number"
               inputmode="numeric">
      </div>
      <div class="form-actions">
        <button type="submit" class="button button--primary button--block" id="pickup-search-button">Search</button>
        {% if query %}
          <a href="/pickups" class="button button--secondary button--block">Clear</a>
        {% endif %}
      </div>
    </form>
  </section>

{% endblock %}

{% block floating_action %}{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    (() => {
      const form = document.querySelector('form[action="/pickups"]');
      if (!form) return;
      const input = form.querySelector('#pickup_query');
      form.addEventListener('submit', (event) => {
        if (!input) return;
        if (!input.value.trim()) {
          event.preventDefault();
        }
      });
    })();
  </script>
{% endblock %}
